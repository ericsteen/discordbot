import discord
from discord.ext import commands
import asyncio
import yt_dlp
from yt_dlp import YoutubeDL


ytdlopts = {
    'format': 'bestaudio',
    'logtostderr': 'True',
    'default_search': 'auto'
        }

ffmpegopts = P
    'before_options': '-nostdin',
    'options': '-vn'
    }


ytdl = YoutubeDL(ytdlopts)

class ytdlp:
    __slots__ = ('bot', '_guild', '_channel', '_cog', 'queue', 'next', 'current', 'np', 'volume')

    def __init__(self, ctx):
        self.bot = ctx.bot
        self._guild = ctx.guild
        self._channel = ctx.channel
        self.cog = ctx._cog
        
        self.queue = asyncio.Queue()
        self.next = asyncio.Event()

        self.np = None #Now Playing
        self.volume = 0.5
        self.current = None
        
        ctx.bot.loop.create_task(self.player_loop())
        print('music player init')

    async def player_loop(self):
        pass




def setup(bot):
    bot.add_cog(ytdlp(bot))


